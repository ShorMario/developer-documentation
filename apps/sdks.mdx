---
title: App SDK
description: "Guide on how to use Whop's App SDK"
---

The Whop Apps SDK is a collection of tools that allow you to interact with the Whop API, authenticate users, and interact with the browser.

## Installation

<Note>
  If you are using one of our templates, the SDK is already installed and ready
  to use.
</Note>

<CodeGroup>

```bash npm
npm install @whop-apps/sdk
```

```bash yarn
yarn add @whop-apps/sdk
```

```bash pnpm
pnpm add @whop-apps/sdk
```

</CodeGroup>

---

## Authentication

This aspect of the SDK allows you to authenticate the people trying to access your app, and make sure only people who have purchased are able to use it.

### validateToken

For this function, you need to get the user's token from the cookies, it is called `whop_user_token`. If you are using Next.js, you can use the `headers` object from `next/headers`

You should use this on every page that you want to be gated.

```typescript
import { headers } from "next/headers";
import { validateToken } from "@whop-apps/sdk";

export default async function AdminPage() {
  await validateToken({ headers });
}
```

---

### getToken

This function will get the users Whop Token from the headers. You must pass the `headers` object.

```typescript
import { getToken } from "@whop-apps/sdk";
import { headers } from "next/headers";

export default async function Home() {
  const token = await getToken({ headers });
}
```

---

### isAuthError

This function will check if the error that is thrown, is an authentication error.

```typescript
import { isAuthError, validateToken } from "@whop-apps/sdk";
import { headers } from "next/headers";

export default async function Home() {
  try {
    await validateToken({ headers });
  } catch (error) {
    if (isAuthError(error)) {
      return <p>You are not allowed to access this page</p>;
    }
  }
}
```

---

## API

The API SDK allows you to interact with the Whop API without having to manually write the requests. All responses are typed which gives you type safety.

### Usage

```typescript
import { whopJson } from "@whop-apps/sdk";
import { headers } from "next/headers";

export default async function Home() {
  // Using the users access token
  const productsObjcet = await whopJson("/products", { headers });

  // Using an API Key
  const productsObject = await whopJson("/products", {
    apiKey: process.env.WHOP_API_KEY,
  });
}
```

There are two ways to authenticate with the API, you can either use the users access token, or you can use an API Key. If you are using the users access token, you must pass the `headers` object from `next/headers`. If you are using an API Key, you must pass the API Key as a string.

### Access Token

The access token is the users token that gets passed into the iFrames cookies. We recommend you use it to fetch information about the current user with the `/me` endpoint.

### API Key

The API key allows you to view information outside the scoped user/company. We recommend that you use this with all other endpoints that are not `/me`. Make sure this API key is not exposed to the client side, as it can be used to access all of your companies data.

### Available routes

To view each endpoint in detail, and see the responses and parameters, click one of the options below:

- [/companies/\{id\}](/apps/api/companies/retrieve)
- [/companies/\{id\}/experiences](/apps/api/companies/company-experiences)
- [/users/\{id\}](/apps/api/users/retrieve)
- [/users/\{id\}/experiences](/apps/api/users/get-experiences)
- [/experiences](/apps/api/experiences/list)
- [/experiences/\{id\}](/apps/api/experiences/retrieve)
- [/products](/apps/api/products/list)
- [/products/\{id\}](/apps/api/products/retrieve)
- [/products/\{id\}/experiences](/apps/api/products/retrieve-experiences)
- [/notifications](/apps/api/notifications/send)

---

## iFrame

The iFrame SDK allows you to interact with the browser and perform tasks such as opening a link in a new tab.

### Usage

To interact with the browser, we need to setup background listeners that are required to communicate over [**Post Message**](https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage). To do this, you need to export a declare a function using the `createAppIframeSDK` function.

```typescript lib/utils/iframe.ts
import { createAppIframeSDK } from "@whop-apps/sdk";

export const WhopApp = createAppIframeSDK({
  onMessage: {
    appPing: () => "app_pong",
  },
});
```

Once you have set this up, you can call the function anywhere in your app. You will need to import the function from the file you added it to. From there, you can use the `openExternalUrl` function to open a link in a new tab.

```typescript
"use client";
import { WhopApp } from "@/lib/utils/iframe";

export default function Home() {
  return (
    <button
      onClick={() => WhopApp.openExternalUrl({ url: "https://google.com" })}
    >
      Open Whop.com
    </button>
  );
}
```
