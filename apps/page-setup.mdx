---
title: Build your admin page
icon: "circle-2"
description: "After you create an app, you will build out the page that allows Whop Companies to interact with your app"
---

## What you'll learn
In this tutorial, youâ€™ll learn how to do the following tasks:
- Create a page that is shown through the Whop iFrame
- Recieve data from Whop using **path parameters**
- Authenticate a user
- Use the Whop API to pull a user's roles

## 1. Create your admin page
We will start by building the **admin page.**

The **admin page** is a specific page URL your app defines. Everytime a company admin views your app from within the Whop Dashboard, they will view the admin page within the iFrame.



1. Create a page to match this URL `/admin/$companyId`. To do this, create this file:  `/app/admin/[companyId]/page.tsx`

```bash
mkdir app/admin && mkdir "app/admin/[companyId]" && touch "app/admin/[companyId]/page.tsx"
```

In order to know which company is viewing the page, Whop will pass the ID as a **path parameter**


2. Add the following code to your file to read and display the company ID
```typescript
export default async function AdminPage({
  params,
}: {
  params: { companyId: string };
}) {
  const companyId = params.companyId;
  return <h1>The ID of the company using my app is {companyId}</h1>;
}
```

3. Update the Admin Path in your [app configuration](https://dash.whop.com/settings/developer) to be `/admin/$companyId`
<Frame caption="Update the admin path to be /admin/$companyId ">
  <img src="https://cdn.discordapp.com/attachments/841805896156839936/1155634108337233990/Manage_App_-_Whop_Dashboard_-_httpsdash.whop.comsettingsdeveloperapp_soLLJMDkBhQDtz_2023-09-24_at_18.34.192x.png" />
</Frame>

4. Navigate to your iFrame URL (this should be easily found on the dashboard), ensure you're in developer mode, and you should see your page!

<Frame caption="You will now see the companyId from within the iFrame">
  <img src="https://media.discordapp.net/attachments/841805896156839936/1155635050709262446/Whop_Dashboard_-_httpsdash.whop.comproductsprod_nIKTInAJBYMCRapp_soLLJMDkBhQDtzexperienceIdexp_WBH9wB7VM2qeG1expNameTest_2023-09-24_at_18.41.022x.png?width=2199&height=1402"/>
</Frame>

## 2. Authenticate the user
Once the user is viewing your page, we will want to make sure they are a valid Whop user with permissions to view this company. Let's begin.

1. Add two imports to the top of your page
```typescript
import { headers } from "next/headers";
import { validateToken } from "@whop-apps/sdk";
```
2. Use the `validateToken` function from the Whop SDK to obtain the user's ID

```typescript

export default async function AdminPage() {
  const { userId } = await validateToken({ headers });
}
```

<Warning>You should **always** call `validateToken` on every page you define. Even if you do not care about the user's ID, you should validate to ensure the user is not malicious.</Warning>


At this point the user is authenticated and we have their Whop User ID


## 3. Check the user's roles

We now want to check to make sure this user is an authorized team member of the company they are browsing. To do this, we will use the **Whop API.**

The Whop SDK comes pre-installed with functions to interact with the Whop API.

1. Retrieve the company using the Whop API
```typescript
  const result = await WhopAPI.user({ headers }).GET("/companies/{id}", {
    params: { path: { id: params.companyId } },
  });
```

This code snippet says to use the Whop API, authenticated as the user (we pass in the user's auth token through `headers`), and fetch the company with the ID passed from the **path parameter**

2. Handle the error case
```typescript
  if (result.isErr) {
    // This shouldn't really happen :)
    console.log(result.error.message);
    return <h1>Something went wrong</h1>;
  }
```

3. Access the company object and look for `company.authorizedUser`
If `company.authorizedUser` is present, we know the user is an **authorized user** of the company. This means they have access.
```typescript
  const company = result.data;
  const authorizedUser = company.authorized_user
```

4. Throw an error if authorizedUser is null
```typescript
  const company = result.data;
  const authorizedUser = company.authorized_user

  if (!authorizedUser) {
    return <h1>You do not have access to view this company</h1>
  }
```

At this point, you have checked with the Whop API to ensure this user has access to view this page.



## 4. Display specific company info
Now that we can gurantee the user has access to view information about this company, let's display some info

1. Retrieve the company's title
We can obtain the company's title from the API call we just did. Let's just assign it to a variable
```typescript
  const companyTitle = company.title;
```

2. Retrieve the user's username
We can use the Whop API again to collect the user's username. Let's do so.
```typescript
  const { data } = await WhopAPI.user({ headers }).GET("/me", {});
  const username = data?.username
```
<Tip>We are going to skip error handling here because we just used this user's access token when retrieving the company. However, we recommend always handling errors. Handling the error will remove the `?`</Tip>

3. Say hello to the user
Replace your returning code with:
```typescript
  return (
    <h1>
      Hello {username}. You are currently looking at my app from {companyTitle}
    </h1>
  );
```

Voila! Go reload your iFrame view and you should see your username and the company title!


## Next steps
- Build out your customer page
- Set up webhooks to get notified in real time
- Interact with the Whop API using your App's authentication
- Understanding constraints of the iFrame, like opening links



