---
title: Build your admin page
icon: "circle-2"
description: "After you create an app, you will build out the page that allows Whop Companies to interact with your app"
---

## What you'll learn

In this tutorial, youâ€™ll learn how to do the following tasks:

- Create a page that is shown through the Whop iFrame
- Recieve data from Whop using **path parameters**
- Authenticate a user
- Use the Whop API to pull a user's roles

## 1. Create your admin page

We will start by building the **admin page.**

The **admin page** is a specific page URL your app defines. Everytime a company admin views your app from within the Whop Dashboard, they will view the admin page within the iFrame.

1. Create a page to match this URL `/admin/$companyId/$productId`. To do this, create this file: `/app/admin/[companyId]/[productId]/page.tsx`

```bash
mkdir app/admin && mkdir "app/admin/[companyId]" && mkdir "app/admin/[companyId]/[productId]" && touch "app/admin/[companyId]/[productId]/page.tsx"
```

In order to know which company is viewing the page, Whop will pass the ID as a **path parameter**

2. Add the following code to your file to read and display the company ID and product ID

```javascript
export default async function AdminPage({
  params,
}: {
  params: { companyId: string, productId: string },
}) {
  const companyId = params.companyId;
  const productId = params.productId;
  return (
    <div>
      <p>The company ID is: {companyId}</p>
      <p>The product ID is: {productId}</p>
    </div>
  );
}
```

3. Update the Admin Path in your [app configuration](https://dash.whop.com/settings/developer) to be `/admin/$companyId/$productId`

   <Frame>
     <img src="https://imgur.com/I02L6Iv.png" />
   </Frame>

4. Navigate to your iFrame URL, you can do this easily by clicking on the banner at the top of the apps settings page. This will redirect you to a demo product that has your app installed. From there, you can enable developer mode.

<Frame>
  <img src="https://imgur.com/RMjXYJx.gif" />
</Frame>

## 2. Authenticate the user

Once the user is viewing your page, we will want to make sure they are a valid Whop user with permissions to view this company. Let's begin.

1. Add two imports to the top of your page

```javascript
import { headers } from "next/headers";
import { validateToken } from "@whop-apps/sdk";
```

2. Use the `validateToken` function from the Whop SDK to obtain the user's ID

```javascript
export default async function AdminPage() {
  const { userId } = await validateToken({ headers });
}
```

<Warning>
  You should **always** call `validateToken` on every page you define. Even if
  you do not care about the user's ID, you should validate to ensure the user is
  not malicious.
</Warning>

At this point the user is authenticated and we have their Whop User ID

## 3. Make sure the user has access to this company

We now want to check to make sure this user is an authorized team member of the company they are browsing. To do this, we will use the `hasAccess` function from the **Whop SDK**.

1. **Update the Whop SDK imports**

```js
import { validateToken, hasAccess, authorizedUserOn } from "@whop-apps/sdk";
```

2. **Check if the user is an authorized user of the company**

To check if the user should be able to access this page, we will use the `hasAccess` function. This function takes in an object with two properties:

- `to`: The resource the user is trying to access. In this case, it will be the company ID
- `headers`: The headers of the request - this allows the SDK to get information about the user.

<Note>
  As we are checking a company ID, we need to use the `authorizedUserOn`
  function. This prefixes the company ID with `authorized-`. If you are not
  using company ID, you can pass the ID directly to `to`
</Note>

```js
const access = await hasAccess({
  to: authorizedUserOn(params.companyId),
  headers,
});
```

3. **Handle the result**

If the user is not authorized, `access` will be `false`. If the user is authorized, `access` will be `true`. Now, we are going to throw an error if the user is not authorized.

```js
if (!access) {
  return <h1>You do not have access to view this company</h1>;
}
```

At this point, you have checked with the Whop SDK to ensure this user has access to view this page.

## 4. Display specific company info

Now that we can gurantee the user has access to view information about this company, let's display some info

1. **Update the Whop SDK imports**

We can use the Whop API to get information about the current company. To do this, you will need to import the `WhopAPI` function.

```javascript
import {
  validateToken,
  hasAccess,
  authorizedUserOn,
  WhopAPI,
} from "@whop-apps/sdk";
```

2. **Fetch the company information**

Now that we have imported the Whop API function, we can use it to fetch the companies information. We are passing in the company ID we got from the path parameters.

```javascript
const companyInformation = await WhopAPI.app().GET("/app/companies/{id}", {
  params: { path: { id: params.companyId } },
});
```

3. **Handle potential errors**

To make sure that we can retrieve the data we want from the result, we first need to check if the request was successful. If the request was not successful, we will throw an error.

```javascript
if (companyInformation.isErr) {
  console.log(companyInformation.error.message);
  return <p>Could not fetch company information</p>;
}
```

4. **Display the information**

Now that we have the company information, we can parse it and display the information

```javascript
const { title } = companyInformation.data;

return <h1>You are currently looking at my app from {title}</h1>;
```

Voila! Go reload your iFrame view and you should see the company title!

## Next steps

- Build out your customer page
- Set up webhooks to get notified in real time
- Interact with the Whop API using your App's authentication
- Understanding constraints of the iFrame, like opening links
